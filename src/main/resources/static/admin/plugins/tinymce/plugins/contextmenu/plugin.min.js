!function(){"use strict";var n=function(t){var e=t,o=function(){return e};return{get:o,set:function(n){e=n},clone:function(){return n(o())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(n){return{isContextMenuVisible:function(){return n.get()}}},o=function(n){return n.settings.contextmenu_never_use_native},r=function(n){return n.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")},u=tinymce.util.Tools.resolve("tinymce.Env"),i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=function(n,t){return{x:n,y:t}},l=function(n,t,e){return c(n.x+t,n.y+e)},s=function(n,t){if(n&&"static"!==i.DOM.getStyle(n,"position",!0)){var e=i.DOM.getPos(n),o=e.x-n.scrollLeft,r=e.y-n.scrollTop;return l(t,-o,-r)}return l(t,0,0)},f=function(n){return u.container},a=function(n,t){if(n.inline)return s(f(),function(n){return c(n.pageX,n.pageY)}(t));var e=function(n,t){var e=i.DOM.getPos(n);return l(t,e.x,e.y)}(n.getContentAreaContainer(),function(n){return c(n.clientX,n.clientY)}(t));return s(f(),e)},m=tinymce.util.Tools.resolve("tinymce.ui.Factory"),v=tinymce.util.Tools.resolve("tinymce.util.Tools"),g=function(n,t,e,o){null===o.get()?o.set(function(n,t){var e,o,u=[];o=r(n),v.each(o.split(/[ ,]/),function(t){var e=n.menuItems[t];"|"===t&&(e={text:t}),e&&(e.shortcut="",u.push(e))});for(var i=0;i<u.length;i++)"|"===u[i].text&&(0!==i&&i!==u.length-1||u.splice(i,1));return(e=m.create("menu",{items:u,context:"contextmenu",classes:"contextmenu"}).renderTo()).on("hide",function(n){n.control===this&&t.set(!1)}),n.on("remove",function(){e.remove(),e=null}),e}(n,e)):o.get().show(),o.get().moveTo(t.x,t.y),e.set(!0)},y=function(n,t,e){n.on("contextmenu",function(r){(function(n,t){return t.ctrlKey&&!o(n)})(n,r)||(r.preventDefault(),g(n,a(n,r),t,e))})};t.add("contextmenu",function(t){var o=n(null),r=n(!1);return y(t,r,o),e(r)})}();